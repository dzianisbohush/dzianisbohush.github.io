!function(e){function s(n){if(a[n])return a[n].exports;var t=a[n]={i:n,l:!1,exports:{}};return e[n].call(t.exports,t,t.exports,s),t.l=!0,t.exports}var a={};s.m=e,s.c=a,s.i=function(e){return e},s.d=function(e,a,n){s.o(e,a)||Object.defineProperty(e,a,{configurable:!1,enumerable:!0,get:n})},s.n=function(e){var a=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(a,"a",a),a},s.o=function(e,s){return Object.prototype.hasOwnProperty.call(e,s)},s.p="",s(s.s=3)}([function(e,s,a){"use strict";const n={player:new(a(11).a)([0,0],3),playerSpeed:170,bulletSpeed:100,enemySpeed:100,towers:[],trapTowers:[],bullets:[],enemies:[],explosions:[],bonusesIncreaseScore:[],bonusesIncreaseBulletSpeed:[],bonusesKillEnemies:[],lastTower:0,lastTrapTower:0,gameTime:0,lastTime:new Date,isGameOver:!1,isPause:!1,isMuted:!1,score:0,scoreEl:document.getElementById("score"),lifesCountEl:document.getElementById("lifesCount"),canvasContext:null,canvas:null,terrainPattern:null};s.a=n},function(e,s,a){"use strict";function n(e,s){return Math.random()*(s-e+e)}function t(e,s){return Math.floor(Math.random()*(s-e))+e}a.d(s,"a",function(){return o}),a.d(s,"c",function(){return n}),a.d(s,"b",function(){return t});const o=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}},function(e,s,a){"use strict";a.d(s,"a",function(){return t}),a.d(s,"b",function(){return o});class n{constructor(e){this.pos=e}}class t extends n{constructor(e){super(e),this.lifesCount=1,this.sprite=new Sprite("../img/ufo.png",[115,89],[52,38.5],7,[0,1,2,3,4,5,6,7])}}class o extends n{constructor(e){super(e),this.lifesCount=6,this.sprite=new Sprite("../img/enemy-boss.png",[0,0],[128,128],6,[0,1,2,3,4,3,2,1])}}},function(e,s,a){"use strict";function n(){const e=Date.now(),s=(e-l.a.lastTime)/1e3;a.i(u.a)(s),a.i(p.a)(),l.a.lastTime=e,l.a.isPause||a.i(c.a)(n)}function t(){l.a.isPause?l.a.isPause&&(document.getElementById("pause-button").innerText="PAUSE",l.a.isPause=!1,l.a.lastTime=new Date,l.a.isMuted||m.play(),n()):(l.a.isPause=!0,document.getElementById("pause-button").innerText="RESUME",m.stop())}function o(){document.getElementById("game-over").style.display="none",document.getElementById("lifesCount").style.display="block",l.a.isGameOver=!1,l.a.gameTime=0,l.a.lastTower=0,l.a.lastTrapTower=0,l.a.score=0,l.a.player.lifesCount=3,l.a.bulletSpeed=350,l.a.isPause=!0,t(),l.a.bonusesIncreaseScore=[],l.a.bonusesIncreaseBulletSpeed=[],l.a.bonusesKillEnemies=[],l.a.towers=[],l.a.trapTowers=[],l.a.enemies=[],l.a.bullets=[],l.a.player.pos=[l.a.canvas.width/2,l.a.canvas.height/2]}function i(){const e=document.getElementById("mute-button");l.a.isMuted?l.a.isMuted&&(l.a.isMuted=!1,e.classList.remove("fa-volume-off"),e.classList.add("fa-volume-up"),m.play()):(l.a.isMuted=!0,e.classList.remove("fa-volume-up"),e.classList.add("fa-volume-off"),m.stop())}Object.defineProperty(s,"__esModule",{value:!0});var r=a(4),l=(a.n(r),a(0)),p=a(5),u=a(6),c=a(1);const m=AudioFX("../sounds/wall.mp3",{volume:.03,loop:!0,autoplay:!0});resources.load(["../img/tower.png","../img/ufo.png","../img/hero.png","../img/bullet.png","../img/terrain.png","../img/bonus-increase-bullet-speed.png","../img/bonus-increase-score.png","../img/bonus-kill-enemies.png","../img/enemy-boss.png","../img/enemy-boss-explosion.png","../img/trap-tower.png"]),window.addEventListener("keydown",e=>{const s=e.keyCode;80===s&&t(),77===s&&i()}),resources.onReady(function(){l.a.canvas=document.createElement("canvas"),l.a.canvasContext=l.a.canvas.getContext("2d"),l.a.canvas.width=1200,l.a.canvas.height=700,document.querySelector(".canvas").appendChild(l.a.canvas),l.a.terrainPattern=l.a.canvasContext.createPattern(resources.get("../img/terrain.png"),"repeat"),document.getElementById("play-again").addEventListener("click",o),document.getElementById("pause-button").addEventListener("click",t),document.getElementById("mute-button").addEventListener("click",i),o(),l.a.lastTime=Date.now(),m.play(),n()}),s.default=t},function(e,s){},function(e,s,a){"use strict";function n(e){o.a.canvasContext.save(),o.a.canvasContext.translate(e.pos[0],e.pos[1]),e.sprite.render(o.a.canvasContext),o.a.canvasContext.restore()}function t(e){for(let s=0;s<e.length;s+=1)n(e[s])}var o=a(0);s.a=function(){o.a.canvasContext.fillStyle=o.a.terrainPattern,o.a.canvasContext.fillRect(0,0,o.a.canvas.width,o.a.canvas.height),o.a.isGameOver||(n(o.a.player),t(o.a.towers),t(o.a.trapTowers),t(o.a.bonusesIncreaseScore),t(o.a.bonusesIncreaseBulletSpeed),t(o.a.bonusesKillEnemies),t(o.a.enemies)),t(o.a.bullets),t(o.a.explosions)}},function(e,s,a){"use strict";var n=a(0),t=a(9),o=a(2),i=a(7),r=a(8),l=a(12),p=a(1);s.a=function(e){n.a.gameTime+=e,function(e){if((input.isDown("DOWN")||input.isDown("s"))&&(n.a.player.pos[1]+=n.a.playerSpeed*e,n.a.player.sprite=n.a.player.down),(input.isDown("UP")||input.isDown("w"))&&(n.a.player.pos[1]-=n.a.playerSpeed*e,n.a.player.sprite=n.a.player.up),(input.isDown("LEFT")||input.isDown("a"))&&(n.a.player.pos[0]-=n.a.playerSpeed*e,n.a.player.sprite=n.a.player.left),(input.isDown("RIGHT")||input.isDown("d"))&&(n.a.player.pos[0]+=n.a.playerSpeed*e,n.a.player.sprite=n.a.player.right),input.isDown("SHIFT")&&!n.a.isGameOver){let e=!1;for(let s=0;s<n.a.towers.length;s+=1)Math.abs(n.a.player.pos[0]-n.a.towers[s].pos[0])<70&&Math.abs(n.a.player.pos[1]-n.a.towers[s].pos[1])<70&&(e=!0);e||(n.a.isMuted||AudioFX("../sounds/new-tower.mp3",{volume:.05}).play(),n.a.towers[n.a.lastTower%3]=new l.a([n.a.player.pos[0],n.a.player.pos[1]-55]),n.a.lastTower+=1)}if(input.isDown("ALT")&&!n.a.isGameOver){let e=!1;for(let s=0;s<n.a.trapTowers.length;s+=1)Math.abs(n.a.player.pos[0]-n.a.trapTowers[s].pos[0])<150&&Math.abs(n.a.player.pos[1]-n.a.trapTowers[s].pos[1])<150&&(e=!0);e||(n.a.isMuted||AudioFX("../sounds/new-tower.mp3",{volume:.05}).play(),n.a.trapTowers[n.a.lastTrapTower%2]=new l.b([n.a.player.pos[0],n.a.player.pos[1]-55]),n.a.lastTrapTower+=1)}}(e),function(e){n.a.player.sprite.update(e);for(let s=0;s<n.a.bonusesIncreaseBulletSpeed.length;s+=1)n.a.bonusesIncreaseBulletSpeed[s].sprite.update(e);for(let s=0;s<n.a.bonusesIncreaseScore.length;s+=1)n.a.bonusesIncreaseScore[s].sprite.update(e);for(let s=0;s<n.a.bonusesKillEnemies.length;s+=1)n.a.bonusesKillEnemies[s].sprite.update(e);for(let s=0;s<n.a.towers.length;s+=1){const t=n.a.towers[s];if(t.sprite.update(e),!n.a.isGameOver&&Date.now()-t.lastFire>500){const e=t.pos[0]+t.sprite.size[0]/2,s=t.pos[1]+t.sprite.size[1]/2;n.a.bullets.push(new r.a([e,s],a.i(p.c)(-2*Math.PI,2*Math.PI))),t.lastFire=Date.now()}}for(let s=0;s<n.a.trapTowers.length;s+=1)n.a.trapTowers[s].sprite.update(e);for(let s=0;s<n.a.bullets.length;s+=1){const a=n.a.bullets[s],t=e*n.a.bulletSpeed,o=Math.sin(a.angle),i=Math.cos(a.angle);a.pos[0]+=o*t,a.pos[1]+=i*t,(a.pos[1]<0||a.pos[1]>n.a.canvas.height||a.pos[0]>n.a.canvas.width)&&(n.a.bullets.splice(s,1),s-=1)}for(let s=0;s<n.a.enemies.length;s+=1){const a=n.a.enemies[s].pos[0],t=n.a.enemies[s].pos[1],o=n.a.player.pos[0],i=n.a.player.pos[1],r=n.a.enemySpeed*e,l=Math.sqrt((o-a)*(o-a)+(i-t)*(i-t));n.a.enemies[s].pos[0]+=r/l*(o-a),n.a.enemies[s].pos[1]+=r/l*(i-t),n.a.enemies[s].sprite.update(e),n.a.enemies[s].pos[0]+n.a.enemies[s].sprite.size[0]<0&&(n.a.enemies.splice(s,1),s-=1)}for(let s=0;s<n.a.explosions.length;s+=1)n.a.explosions[s].sprite.update(e),n.a.explosions[s].sprite.done&&(n.a.explosions.splice(s,1),s-=1)}(e),function(){if(Math.random()<1-.9999**n.a.gameTime)switch(a.i(p.b)(0,2)){case 0:n.a.enemies.push(new o.b([0,Math.random()*(n.a.canvas.height-30)]));break;default:n.a.enemies.push(new o.b([n.a.canvas.width,Math.random()*(n.a.canvas.height-30)]))}}(),function(){if(Math.random()<1-.999**n.a.gameTime)switch(a.i(p.b)(0,4)){case 0:n.a.enemies.push(new o.a([0,Math.random()*(n.a.canvas.height-30)]));break;case 1:n.a.enemies.push(new o.a([Math.random()*n.a.canvas.width,0]));break;case 2:n.a.enemies.push(new o.a([Math.random()*n.a.canvas.width,n.a.canvas.height-30]));break;default:n.a.enemies.push(new o.a([n.a.canvas.width,Math.random()*(n.a.canvas.height-30)]))}}(),function(){if(Math.random()<1-.9995**n.a.gameTime)switch(a.i(p.b)(1,4)){case 1:n.a.bonusesIncreaseBulletSpeed.length<=3&&n.a.bonusesIncreaseBulletSpeed.push(new i.a([a.i(p.b)(50,1150),a.i(p.b)(50,650)],"../img/bonus-increase-bullet-speed.png"));break;case 2:n.a.bonusesIncreaseScore.length<=3&&n.a.bonusesIncreaseScore.push(new i.a([a.i(p.b)(50,1150),a.i(p.b)(50,650)],"../img/bonus-increase-score.png"));break;default:n.a.bonusesKillEnemies.length<=3&&n.a.bonusesKillEnemies.push(new i.a([a.i(p.b)(50,1150),a.i(p.b)(50,650)],"../img/bonus-kill-enemies.png"))}}(),a.i(t.a)(),n.a.scoreEl.innerHTML=n.a.score,n.a.lifesCountEl.innerHTML=n.a.player.lifesCount}},function(e,s,a){"use strict";s.a=class{constructor(e,s){this.pos=e,this.sprite=new Sprite(s,[0,0],[32,31],6,[0,1,2,3,4,5,6,7])}}},function(e,s,a){"use strict";s.a=class{constructor(e,s){this.pos=e,this.angle=s,this.sprite=new Sprite("../img/bullet.png",[0,0],[24,24])}}},function(e,s,a){"use strict";function n(e,s,a,n){return function(e,s,a,n,t,o,i,r){return!(a<=t||e>i||n<=o||s>r)}(e[0],e[1],e[0]+s[0],e[1]+s[1],a[0],a[1],a[0]+n[0],a[1]+n[1])}function t(e){o.a.score+=e}var o=a(0),i=a(3),r=a(10),l=a(2);s.a=function(){o.a.player.pos[0]<0?o.a.player.pos[0]=0:o.a.player.pos[0]>o.a.canvas.width-o.a.player.sprite.size[0]&&(o.a.player.pos[0]=o.a.canvas.width-o.a.player.sprite.size[0]),o.a.player.pos[1]<0?o.a.player.pos[1]=0:o.a.player.pos[1]>o.a.canvas.height-o.a.player.sprite.size[1]&&(o.a.player.pos[1]=o.a.canvas.height-o.a.player.sprite.size[1]),function(){for(let e=0;e<o.a.enemies.length;e+=1){const s=o.a.enemies[e].pos,p=o.a.enemies[e].sprite.size;for(let a=0;a<o.a.bullets.length;a+=1)if(n(s,p,o.a.bullets[a].pos,o.a.bullets[a].sprite.size)){if(o.a.bullets.splice(a,1),t(200),o.a.enemies[e].lifesCount>1){o.a.isMuted||AudioFX("../sounds/explosion.mp3").play(),o.a.enemies[e].lifesCount-=1,o.a.enemies[e].lifesCount<2&&o.a.enemies.splice(e,1),e+=1,o.a.explosions.push(new r.a(s));break}if(1===o.a.enemies[e].lifesCount){o.a.isMuted||AudioFX("../sounds/explosion.mp3").play(),o.a.enemies.splice(e,1),e+=1,o.a.explosions.push(new r.b(s));break}}n(s,p,o.a.player.pos,o.a.player.sprite.size)&&(o.a.enemies[e]instanceof l.a?(o.a.explosions.push(new r.b(s)),o.a.player.lifesCount-=1,o.a.enemies.splice(e,1),e+=1):(o.a.explosions.push(new r.a(s)),o.a.player.lifesCount-=5,o.a.enemies.splice(e,1),e+=1),o.a.player.lifesCount<=1&&(document.getElementById("game-over").style.display="block",document.getElementById("lifesCount").style.display="none",o.a.isMuted||AudioFX("../sounds/game-over.mp3",{volume:.2}).play(),o.a.isGameOver=!0,a.i(i.default)()),o.a.isMuted||AudioFX("../sounds/explosion.mp3").play())}}(),function(){for(let e=0;e<o.a.bonusesKillEnemies.length;e+=1)if(n(o.a.bonusesKillEnemies[e].pos,o.a.bonusesKillEnemies[e].sprite.size,o.a.player.pos,o.a.player.sprite.size)){o.a.isMuted||(AudioFX("../sounds/explosion-big.mp3").play(),AudioFX("../sounds/bonus.mp3",{volume:.03}).play()),o.a.bonusesKillEnemies.splice(e,1),e-=1;for(let e=0;e<o.a.enemies.length;e+=1){const s=o.a.enemies[e].pos;o.a.explosions.push(new r.a(s))}o.a.enemies.length=0,t(5e3)}}(),function(){for(let e=0;e<o.a.bonusesIncreaseScore.length;e+=1)n(o.a.bonusesIncreaseScore[e].pos,o.a.bonusesIncreaseScore[e].sprite.size,o.a.player.pos,o.a.player.sprite.size)&&(o.a.isMuted||AudioFX("../sounds/bonus.mp3",{volume:.03}).play(),o.a.bonusesIncreaseScore.splice(e,1),e-=1,o.a.player.lifesCount+=1,t(1e4))}(),function(){for(let e=0;e<o.a.enemies.length;e+=1){const s=o.a.enemies[e].pos,a=o.a.enemies[e].sprite.size;for(let i=0;i<o.a.trapTowers.length;i+=1){const p=o.a.trapTowers[i].pos;n(s,a,p,o.a.trapTowers[i].sprite.size)&&(t(200),o.a.isMuted||AudioFX("../sounds/explosion.mp3").play(),o.a.enemies[e]instanceof l.b?(o.a.trapTowers.splice(i,1),o.a.explosions.push(new r.a(p)),o.a.explosions.push(new r.a(s))):o.a.explosions.push(new r.b(s)),o.a.enemies.splice(e,1),e+=1)}}}(),function(){for(let e=0;e<o.a.bonusesIncreaseBulletSpeed.length;e+=1)n(o.a.bonusesIncreaseBulletSpeed[e].pos,o.a.bonusesIncreaseBulletSpeed[e].sprite.size,o.a.player.pos,o.a.player.sprite.size)&&(o.a.isMuted||AudioFX("../sounds/bonus.mp3",{volume:.03}).play(),o.a.bonusesIncreaseBulletSpeed.splice(e,1),e-=1,o.a.bulletSpeed+=100,t(2e3))}()}},function(e,s,a){"use strict";a.d(s,"b",function(){return t}),a.d(s,"a",function(){return o});class n{constructor(e){this.pos=e}}class t extends n{constructor(e){super(e),this.sprite=new Sprite("../img/ufo.png",[30,196],[73,59],15,[0,1,2,3,4,5,6,7],null,!0)}}class o extends n{constructor(e){super(e),this.sprite=new Sprite("../img/enemy-boss-explosion.png",[0,0],[96,96],15,[0,1,2,3,4,5],null,!0)}}},function(e,s,a){"use strict";s.a=class{constructor(e,s){this.pos=e,this.lifesCount=s,this.sprite=new Sprite("../img/hero.png",[0,0],[58,58.4],2,[0,1,2,1]),this.down=new Sprite("../img/hero.png",[0,0],[58,58.4],3,[0,1,2,1]),this.up=new Sprite("../img/hero.png",[0,173],[58,58.4],3,[0,1,2,1]),this.left=new Sprite("../img/hero.png",[0,58],[58,58.4],3,[0,1,2,1]),this.right=new Sprite("../img/hero.png",[0,116.6],[58,58.4],3,[0,1,2,1])}}},function(e,s,a){"use strict";a.d(s,"a",function(){return t}),a.d(s,"b",function(){return o});class n{constructor(e){this.pos=e}}class t extends n{constructor(e){super(e),this.lastFire=Date.now(),this.sprite=new Sprite("../img/tower.png",[31,0],[48,118])}}class o extends n{constructor(e){super(e),this.sprite=new Sprite("../img/trap-tower.png",[0,0],[65,98],6,[0,1,2,3,2,1])}}}]);